[{"title":"Hexo网页搭建记录（二）","url":"/2024/04/08/Hexo网页搭建记录（二）/","content":"\n![](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408103905.png)\n\n‍\n\n书接上回👉：[Hexo网页搭建记录（一） (qq.com)](https://mp.weixin.qq.com/s/TBn7h0mGex3C1yNHuyDfyA)。\n\n上回讲到，Hexo在**本地**的安装、配置以及部署。\n\n🤔但怎样才能让别人在网上看得到我的博客？\n\n这篇记录，或许能提供一个低成本的易上手的方案。\n\n# 简介\n\n* **Github pages**\n\n  [关于 GitHub Pages - GitHub 文档](https://docs.github.com/zh/pages/getting-started-with-github-pages/about-github-pages)。GitHub Pages 是一项静态站点托管服务，它直接从 GitHub 上的仓库获取 HTML、CSS 和 JavaScript 文件，（可选）通过构建过程运行文件（Action)，然后发布网站。\n* **部署原理**\n\n  本地撰写完markdown格式文章后，通过hexo解析成具有主题样式的HTML静态网页，再推送至github pages 完成发布\n\n  ![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408151534.png)​\n\n这个方案的好处是安全、完全免费，迁移方便。不足是发文流程稍复杂，访问速度一般。\n\n为了改善问题，前段时间我查找资料进行了一定的优化，有需要可以参考：\n\n[【小白向】基于fluid模板的网页相册搭建 (qq.com)](https://mp.weixin.qq.com/s/7p6ez0PY6i4THydZELZ3DA)\n\n[在GitHub Pages上自动部署Hexo (qq.com)](https://mp.weixin.qq.com/s/YbkyoJoba9vqaOPSaSGq5A)\n\n# Github page创建\n\n建立名为  `**<你的 GitHub 用户名>.github.io**`​ 的公开储存库，若之前已将 Hexo 上传至其他储存库，将该储存库重命名即可。之后点击pages选项则会自动生成静态网页。\n\n![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408153513.png)\n\n之后点击pages选项则会自动生成静态网页\n\n![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408164937.png)\n\n# Hexo部署至Github page\n\n## 仓库连接\n\n* 先查看git环境配置\n\n  ```bash\n  git config --list\n  ```\n* 如果本地还没有配置user.name和user.email，则需要用以下命令进行配置\n\n  ```bash\n  git config --global user.name \"用户名\"\n  git config --global user.email  \"<your github email>\" #填写github注册的邮箱\n  ```\n* 生成ssh密钥\n\n  ```bash\n  ssh-keygen -t ed25519 -C \"<your github email>\"\n  #或\n  ssh-keygen -t rsa -C \"<your github email>\"\n  ```\n\n  运行完命令一路回车就行\n* 添加密钥到github\n\n  进入 [C:\\Users\\用户名\\\\\\.ssh] 目录（要勾选显示“隐藏的项目”），用记事本打开公钥 id_rsa.pub （公钥）文件并复制里面的内容。\n\n  登陆 GitHub ，进入账户Settings 页面，选择左边栏的 SSH and GPG keys，点击 New SSH key。\n\n  ![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408160321.png)\n\n  Titlte自定义，keytype默认，把刚刚复制的id_rsa.pub粘贴到key填写框\n\n  ![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408160730.png)\n* 验证\n\n  ```bash\n  ssh -T git@github.com\n  # 如果输出以下内容，则表示配置成功，此时即可直接进行任何git操作。\n  # Hi xxx! You've successfully authenticated, but GitHub does not provide shell access.\n  ```\n\n## 配置config.yml\n\n补充hexo配置文件config.yml中的deploy配置，<respository url>可以填仓库的https或ssh\n\n![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408161926.png)\n\n```bash\ndeploy:\n  type: git\n  repo: <repository url> # <repository url>为仓库的https或ssh\n  branch: [branch] # [branch]为main或其他分支\n```\n\n## 部署流程\n\n* 安装所需插件\n\n  ```bash\n  # （可选）本地部署渲染效果实时预览插件\n  npm install hexo-browsersync --save\n\n  # hexo部署插件\n  npm install hexo-deployer-git --save\n  ```\n\n* 部署流程\n\n  ```bash\n  # 部署流程\n  hexo clean # 清除缓存文件 (db.json) 和已生成的静态文件 (public)\n  \n  hexo g # 解析渲染生成静态文件\n  \n  hexo s # 启动服务器，可用于本地调试。默认情况下访问网址为：http://localhost:4000/\n  \n  hexo d # 部署网站至设置好的GitHub pages\n  ```\n\n  ‍\n\n其他常用命令：\n\n```bash\nhexo new \"name\"       # 新建文章\nhexo new page \"name\"  # 新建页面\nhexo g                # 生成页面\nhexo d                # 部署\nhexo g -d             # 生成页面并部署\nhexo s                # 本地预览\nhexo clean            # 清除缓存和已生成的静态文件\nhexo help             # 帮助\n```\n\n# 参考链接\n\n[Hexo使用SSH连接GitHub_hexo的ssh连接github-CSDN博客](https://blog.csdn.net/weixin_42569846/article/details/105808683)\n\n[创建 GitHub Pages 站点 - GitHub 文档](https://docs.github.com/zh/pages/getting-started-with-github-pages/creating-a-github-pages-site)\n\n[Github配置SSH密钥连接（附相关问题解决） - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/628727065#:~:text=Github%E9%85%8D%E7%BD%AESSH%E5%AF%86%E9%92%A5%E8%BF%9E%E6%8E%A5%EF%BC%88%E9%99%84%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%EF%BC%89%201%201.%20%E7%94%9F%E6%88%90SSH%E5%AF%86%E9%92%A5%20%E9%A6%96%E5%85%88%E5%9C%A8%E6%9C%AC%E5%9C%B0%E6%9C%BA%E5%99%A8%E4%B8%8A%E6%89%93%E5%BC%80%E7%BB%88%E7%AB%AF%EF%BC%8C%20%E8%BE%93%E5%85%A5%E4%BB%A5%E4%B8%8B%E5%91%BD%E4%BB%A4%E7%94%9F%E6%88%90SSH%E5%AF%86%E9%92%A5%20%EF%BC%9A%20...,%E5%A4%8D%E5%88%B6%E5%85%AC%E9%92%A5%E5%86%85%E5%AE%B9%20%E5%88%B0%E8%87%AA%E5%B7%B1%E7%9A%84Github%E8%B4%A6%E6%88%B7%E4%B8%AD%E3%80%82%20...%204%204.%20%E9%AA%8C%E8%AF%81%20%E6%89%A7%E8%A1%8C%E5%AE%8C%E4%B8%8A%E8%BF%B0%E4%B8%A4%E6%AD%A5%E6%93%8D%E4%BD%9C%E5%90%8E%EF%BC%8C%E6%AD%A3%E5%B8%B8%E6%83%85%E5%86%B5%E4%B8%8B%E5%B7%B2%E7%BB%8F%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F%E4%BA%86%EF%BC%8C%E6%AD%A4%E6%97%B6%E5%8F%AF%E4%BB%A5%E9%AA%8C%E8%AF%81%E4%B8%80%E4%B8%8B%EF%BC%9A%20)\n\n[部署 | Hexo](https://hexo.io/zh-cn/docs/one-command-deployment)\n","tags":["网页搭建","hexo"],"categories":["生产指南"]},{"title":"Hexo网页搭建记录（一）","url":"/2024/04/07/Hexo网页搭建记录（一）/","content":"\n![image](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408103905.png)\n\n‍\n\n# 🙄Hexo 是啥？\n\nHexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他标记语言）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。[官方文档 | Hexo](https://hexo.io/zh-cn/docs/)\n\n# 🤔 怎么装？\n\n## 🧑‍🌾 环境安装：\n\n主要是 git 和 node.js 的安装，具体可参考我上一篇推文\n\n[Hexo 网页搭建环境安装 (qq.com)](https://mp.weixin.qq.com/s/RFNJn3v--Zza7-CplweiKg)\n\n[Hexo 网页搭建环境安装-CSDN 博客](https://blog.csdn.net/lpl0223/article/details/137473610)\n\n## 🧑‍🔧Hexo 安装\n\n* 当环境安装完成后，即可在 cmd 窗口或者使用 npm 安装 Hexo\n\n  ```bash\n  # 选择以下一种安装类型\n\n  npm install hexo #局部安装\n\n  npm install -g hexo cli #全局安装\n  ```\n\n* 检查 hexo 版本\n\n  ```bash\n  hexo --version\n  ```\n\n# 🤓 本地页面\n\n* 创建博客文件夹，名字自定义\n* 进入文件夹，在地址栏**输入 cmd 回车**，或选择文件夹空白处右键选择 **git bash here** 打开当前文件夹的命令行窗口。\n\n  ![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408090943.png)​\n* 初始化 hexo：\n\n  ```bash\n  hexo init #初始化文件夹\n\n  npm install # 安装所需文件\n  ```\n\n  新建完成后，文件夹的目录如下\n\n  ```\n  .\n  ├── _config.yml # 博客配置文件\n  ├── package.json # #应用程序的信息\n  ├── scaffolds # 模板文件夹\n  ├── source # 存放用户资源\n  |   ├── _drafts\n  |   └── _posts # 文章存放文件夹\n  └── themes # 主题文件夹\n  ```\n\n* 检查能否启动\n\n  ```bash\n  hexo s # 本地部署网页命令\n  ```\n\n  运行命令后，窗口会提示已在 `http://localhost:4000/` ​部署，点击链接打开，即可看到 hexo 的初始主题网页界面\n\n# 🧐 网站配置\n\n## hexo 配置\n\n网页的大部分配置都可以在根目录的_config.yml 文件中进行配置和修改，具体参考 [Hexo 配置文档说明](https://hexo.io/zh-cn/docs/configuration)\n\n# 😤 我要换主题！\n\n## 主题下载\n\n进入 hexo 官方主题库：\n\n![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408102500.png)​\n\n* 方式一：\n\n  挑选喜欢的界面，点击进入，下载 release 到 theme 文件夹，解压\n* 方式二：\n\n  在得到主题 github 仓库地址后，在 theme 文件夹下，打开命令行窗口\n\n  ```bash\n  # 把下面网址替换成你需要的主题github仓库地址\n  git clone --depth=1 https://github.com/jerryc127/hexo-theme-butterfly\n  ```\n\n* 方式三：\n\n  Hexo 5.0.0 版本以上，推荐通过 npm 直接安装，进入博客目录执行命令：\n\n  ```bash\n  npm install --save hexo-theme-fluid\n  ```\n\n以上方式都需要把主题文件夹的名称改成主题名，方便后续设置\n\n## 主题配置\n\n修改 hexo 安装文件夹下的_config.yml 文件，theme 后面的名字改为你安装主题的名字，如 fluid。\n\n![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408100125.png)​\n\n后续的界面 diy，参考主题对应的参考文档就好啦 👍\n\n‍\n\n下面是几个比较热门，相关教程也比较多的主题：\n\n* [Hexo Theme Fluid (fluid-dev.com)](https://hexo.fluid-dev.com/)\n* [Butterfly - A Simple and Card UI Design theme for Hexo](https://butterfly.js.org/)\n* [theme-next.js.org](https://theme-next.js.org/)\n* [DaraW | Code is Poetry](https://blog.daraw.cn/)\n\n# 指令\n\n在 hexo 文件夹根目录下 👇\n\n* 新建文章：\n\n  ```bash\n  hexo new [layout] <title>\n  # 例hexo new \"如何新建一篇文章\"\n  ```\n* 新建页面\n\n  ```bash\n  hexo new page \"page name\"\n  ```\n\n  **注意**：新增 tags、categories 等页面后，需要到主题文件夹下的_config.yml 中的 menu 设置项开启页面（取消注释即可）\n\n  ![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240408105759.png)​\n* 生成静态文件\n\n  ```bash\n  hexo g\n  ```\n* 启动服务器\n\n  ```bash\n  hexo s\n  ```\n* 部署网站(需要服务器）\n\n  ```bash\n  hexo d\n  ```\n\n# 参考链接\n\n* [建站 | Hexo](https://hexo.io/zh-cn/docs/setup)\n* [开始使用 | Hexo Fluid 用户手册 (fluid-dev.com)](https://hexo.fluid-dev.com/docs/start/)\n* https://sspai.com/post/62441\n","tags":["网页搭建","hexo"],"categories":["生产指南"]},{"title":"在 GitHub Pages 上自动部署 Hexo","url":"/2024/04/05/在 GitHub Pages 上自动部署 Hexo/","content":"\n# Github Action 介绍\n\nGitHub Actions 是 GitHub 于 2018 年 10 月推出的持续集成服务。\n\nGitHub Actions 的工作原理如下：\n\n1. 当我们设置好需要自动化执行的任务脚本（存放在 `.github/workflows`​ 目录下的 `.yml`​ 文件）后，GitHub Actions 监控当前仓库的某一个操作（如 push）。\n2. 一旦有此操作发生，GitHub Actions 将分配一个虚拟主机来自动化执行这些任务。\n\n我们设置的任务即为 Action，它存放在项目根目录的 `.github/workflows`​ 文件下，后缀为 `.yml`​。一个 Action 相当于是一个工作流，一个工作流可以包含多个任务，每个任务又可以分成几个步骤。任务、步骤会依次执行。\n\n**接下来就是操作步骤了**\n\n# 1、Hexo 本地源文件连接 github page 仓库\n\n1. **GitHub 上建立名为**  `**<你的 GitHub 用户名>.github.io**` **的储存库**，若之前已将 Hexo 上传至其他储存库，将该储存库重命名即可。教程参考 👉[siyuan://blocks/20240403225625-rs9ss7g](siyuan://blocks/20240403225625-rs9ss7g)\n2. **git 创建新分支（若本地还未连接过 github 仓库，可参考：**​[Github——git 本地仓库建立与远程连接（最详细清晰版本！附简化步骤与常见错误）_将本地仓库与远程仓库关联-CSDN 博客](https://blog.csdn.net/qq_29493173/article/details/113094143)）\n\n   ```git\n   git branch new-branch #本地创建一个新的分支，new-branch为新分支名\n   \n   git checkout new-branch #切换到新分支\n   \n   #如果你已经在本地进行了一些修改（例如，添加了新文件或者修改了现有文件），你需要将这些更改暂存并提交到新分支上\n   git add . #将更改暂存\n   \n   git commit -m \"Your commit message\" #使用git commit命令将暂存的更改提交到新分支上\n   \n   git push origin new-branch #将新分支的更改推送到远程仓库\n   ```\n3. 将 Hexo 文件夹中的文件 push 到储存库新建的非默认分支（如 hexooo）\n\n* 将本地 hexooo 分支 push 到 GitHub\n\n  ```\n  git push -u origin hexooo\n  ```\n* 默认情况下 `public/`​ 不会被上传(也不该被上传)，确保 `.gitignore`​ 文件中包含一行 `public/`​。整体文件夹结构应该与 [示例储存库](https://github.com/hexojs/hexo-starter) 大致相似。\n\n# 2、配置密钥\n\n如果你的 Hexo 可以正常地部署到 GitHub，那么实际上你原来的秘钥是可以正常使用的。但是私钥可能还用于不同的服务器的 SSH 访问和其他身份验证，因此，我们生成一个新的秘钥对来专门部署 Hexo。\n\n以操作系统是 Windows 为例：\n\n1. **打开命令提示符**：在开始菜单中搜索并打开 \"命令提示符\"或\"cmd\"。\n2. **检查是否已存在 SSH 密钥**：输入以下命令并按 Enter 键：\n\n   ```bash\n   dir %userprofile%\\.ssh\n   ```\n\n   如果已经存在 SSH 密钥，你将看到类似 `id_rsa`​ 和 `id_rsa.pub`​ 这样的文件。这些文件就是你的 SSH 私钥和公钥。\n3. **如果没有 SSH 密钥，生成新的密钥**：输入以下命令并按 Enter 键：\n\n   ```bash\n   ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n   ```\n\n   替换 `your_email@example.com`​ 为你的 GitHub 注册邮箱。这条命令将会生成一对新的 SSH 密钥。\n4. **按提示操作**：运行上述命令后，你会看到一些提示，如密钥文件的保存位置等。你可以选择默认选项，或者按照提示输入自定义的文件名和密码。\n5. **添加 SSH 密钥到 GitHub**：完成密钥生成后，你需要将**公钥**（一般是以 XXXpub 结尾的）和私钥都添加到 GitHub 上。你可以使用命令来显示，也可以去刚刚生成密钥文件查看。\n6. **在 GitHub 上添加公钥**：在 GitHub 部署仓库，进入 Settings -> Deploy keys -> Add deploy key 页面。在 \"Title\" 中输入一个描述性的标题如，然后粘贴刚才复制的公钥到 \"Key\" 文本框中，最后点击 \"Add SSH key\" 按钮。\n\n   ![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240405222023.png \"Deploy keys页面\")\n7. **在 GitHub 上添加部署 Action 私钥：** 仓库访问 Settings -> Deploy keys -> New respository secret，名字部分填写：`HEXO_DEPLOY_KEY`​，注意大小写，这个后面的 GitHub Actions Workflow 要用到，一定不能写错。\n\n   ![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240405222337.png \"Action secret页面\")\n\n# 3、创建 Github Action 工作流 workflow\n\n* 使用 `node --version`​ 指令检查你电脑上的 Node.js 版本，并**记下该版本** (例如：`v20.y.z`​)\n* 在 github 储存库中前往 `Settings > Pages > Source`​，并将 `Source`​ 改为 `GitHub Actions`​。\n* 在本地 Hexo 根目录中创建 `.github/workflows/pages.yml`​，并填入以下内容 (将 node 版本中的 20 替换为第一个步骤中记下的版本)：\n\n```yml\n# 定义一个名为 Pages 的动作\nname: Pages\n\n# 当有一个新的推送（push）到名为 hexooo 的分支时，执行部署任务\non:\n  push:\n    branches:\n      - hexooo\n\n# 定义一个名为 build-and-deploy 的 job\njobs:\n  build-and-deploy:\n    # 在 Ubuntu 最新版本上运行此 job\n    runs-on: ubuntu-latest\n    steps:\n      # 检出 hexooo 分支的代码\n      - name: Checkout code from hexooo branch\n        uses: actions/checkout@v4\n        with:\n          ref: hexooo\n          persist-credentials: false\n\n      # 设置 Git 用户信息\n      - name: Set up Git user information\n        run: |\n          git config --global user.name \"XXX\"\n          git config --global user.email \"XXX@XXX.com\"\n\n      # 设置 Node.js 20.x 版本\n      - name: Set up Node.js 20.x\n        uses: actions/setup-node@v2\n        with:\n          node-version: '20'\n  \n      # 全局安装 Hexo\n      - name: Install Hexo globally\n        run: |\n          npm install -g hexo-cli\n          npm install\n\n      # 缓存 NPM 依赖\n      - name: Cache NPM dependencies\n        uses: actions/cache@v2\n        with:\n          path: node_modules\n          key: ${{ runner.OS }}-node-${{ hashFiles('**/package-lock.json') }}\n          restore-keys: |\n            ${{ runner.OS }}-node-\n\n      # 使用环境变量 ACTION_DEPLOY_KEY 部署到主分支\n      - name: Deploy to main branch\n        env:\n          ACTION_DEPLOY_KEY: ${{ secrets.HEXO_DEPLOY_KEY }}\n        run: |\n          mkdir -p ~/.ssh/\n          echo \"$ACTION_DEPLOY_KEY\" > ~/.ssh/id_rsa\n          chmod 700 ~/.ssh\n          chmod 600 ~/.ssh/id_rsa\n          ssh-keyscan github.com >> ~/.ssh/known_hosts\n\n      # 部署\n      - name: Deploy\n        run: |\n          hexo clean\n          hexo generate\n          hexo deploy\n```\n\n6. 文件创建完后，push 至 github，在仓库页面的 Action 选项卡可查看工作部署流程\n\n   ![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240405230309.png \"Action部署页面\")\n\n最后，前往 `https://<你的 GitHub 用户名>.github.io`​ 查看网站\n\n![image.png](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/siyuanpic/20240405230721.png \"部署成功\")\n\n## 参考链接\n\n* [GitHub Pages 使用文档](https://docs.github.com/zh/pages)\n* [使用自定义 GitHub Actions 工作流进行发布](https://docs.github.com/zh/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site#%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89-github-actions-%E5%B7%A5%E4%BD%9C%E6%B5%81%E8%BF%9B%E8%A1%8C%E5%8F%91%E5%B8%83)\n* [actions/deploy-github-pages-site](https://github.com/marketplace/actions/deploy-github-pages-site)\n* [在 GitHub Pages 上部署 Hexo | Hexo](https://hexo.io/zh-cn/docs/github-pages)\n* [Github——git 本地仓库建立与远程连接（最详细清晰版本！附简化步骤与常见错误）_将本地仓库与远程仓库关联-CSDN 博客](https://blog.csdn.net/qq_29493173/article/details/113094143)\n* [GitHub Actions 来自动部署 Hexo - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/170563000)\n* [使用 GitHub Actions 自动部署 Hexo 博客到 GitHub Pages - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/161969042#:~:text=%E4%BD%BF%E7%94%A8%20GitHub%20Actions%20%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%20Hexo%20%E5%8D%9A%E5%AE%A2%E5%88%B0%20GitHub%20Pages,%E5%BC%80%E5%8F%91%E6%BA%90%E7%A0%81%E3%80%82%20...%203%20%E9%83%A8%E7%BD%B2%20%E6%9C%80%E5%90%8E%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AA%E9%9C%80%E8%A6%81%E5%B0%86%E6%BA%90%E7%A0%81%E6%8E%A8%E9%80%81%E5%88%B0%E6%8C%87%E5%AE%9A%E5%88%86%E6%94%AF%EF%BC%8CGitHub%20Actions%20%E5%B0%B1%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%B8%AE%E6%88%91%E4%BB%AC%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE%E5%95%A6%E3%80%82%20)\n\n‍\n","tags":["网页搭建"],"categories":["生产指南"]},{"title":"《如何找到想做的事》","url":"/2024/03/26/寻找人生之路/","content":"\n# 人生道路的选择\n\n## Step 1. 了解自己\n\n### 价值观（原则和标准）\n\n|                           Question                           | Answer |\n| :----------------------------------------------------------: | :----: |\n| 你有尊敬的人吗？他是谁？<br />为什么尊敬他？为什么崇拜他？喜欢他什么地方？ |        |\n|           青春期或活力期是否有你我影响很大的事情？           |        |\n|                现在社会有什么需要改进的地方？                |        |\n|             在朋友眼里你是一个看重什么东西的人？             |        |\n|        你会给别人什么建议？或不希望别人给你什么建议？        |        |\n\n### 天赋与才能（你的说明书）\n\n|             Question             | Answer |\n| :------------------------------: | ------ |\n|       目前人生最充实的经历       |        |\n|    最近一次对别人不耐烦的事情    |        |\n|      闻身边的人你擅长什么？      |        |\n| 放弃现在的工作，特别想做的事情？ |        |\n|       目前为止成功的事情？       |        |\n\n### 愿望和梦想\n\n|           Question           | Answer |\n| :--------------------------: | ------ |\n| 什么事情就算花钱也愿意去学？ |        |\n|   你书架上有什么类型的书？   |        |\n| 有没有什么内容给你很大帮助?  |        |\n|   你有想要感谢的人和事吗？   |        |\n|  你对这世界有什么不满的吗？  |        |\n\n## Step 2. 做出人生道路选择\n\n### 判断可能的人生方向\n\n![](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/img/post/202403262040152.png)\n\n* 注意：\n  1. 最终选择要符合价值观\n  2. 这一次选择不会是人生的最后一次选择\n","tags":["成长"]},{"title":"Hexo基于fluid模板的相册搭建","url":"/2024/03/25/Hexo基于fluid主题的相册搭建/","content":"\n\nHexo主要是用于发表博客也就是文章的静态网页框架工具，所以官方很少给到相册搭建的教程。而作为前端小白的我，尝试搭建网页的目的就是为了制作一个网页相册，为此，我死磕了接近一个星期，才大概把这个博客网页集成相册功能的方法搞懂。\n\n# Toc\n<!-- @import \"[TOC]\" {cmd=\"toc\" depthFrom=2 depthTo=3 orderedList=false} -->\n\n<!-- code_chunk_output -->\n\n- [搭建思路](#搭建思路)\n- [文件夹分配](#文件夹分配)\n- [操作步骤](#操作步骤)\n  - [1.新建相册页面](#1新建相册页面)\n  - [2.处理图片信息](#2处理图片信息)\n  - [3.加载js和css文件](#3加载js和css文件)\n  - [4.网页端图片加速](#4网页端图片加速)\n- [优化](#优化)\n  - [简化create流程](#简化create流程)\n  - [简化ossutil流程](#简化ossutil流程)\n- [参考](#参考)\n\n<!-- /code_chunk_output -->\n\n\n\n## 搭建思路\n\n![搭建思路](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/gallery/%E6%96%87%E7%AB%A0%E5%9B%BE/202403302122803.png)\n\n## 文件夹分配\n\n![文件夹结构](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/gallery/%E6%96%87%E7%AB%A0%E5%9B%BE/202403311642349.png)\n\n- gallery：装载相册原图的文件夹。在该文件夹下，不同主题的相册以**单独**的文件夹存放，并且，相册里面只允许存放**图片格式**的文件\n- photos：由hexo新建命令生成的页面文件夹，用于构成网页导航中的相册子页面。其中的**index**定义了页面的内容和元数据（通过YAML Front-matter），并会被Hexo转换成最终的静态HTML页面\n- js：存放source文件下的JavaScript脚本\n- hexo根目录下的scripts：存放注入代码等需要在根目录执行的JavaScript脚本\n\n## 操作步骤\n\n### 1.新建相册页面\n\n```node\nhexo n page photos\n```\n\n编辑index.md,输入以下信息形成页面布局\n\n```markdown\n---\ntitle: Photos\ndate: 2024-03-25 16:57:45\nsubtitle: 岁月留痕\nlayout: photo\n---\n\n<style>\n.ImageGrid {\n  width: 100%;\n  max-width: 1040px;\n  margin: 0 auto;\n  text-align: center;\n}\n.card {\n  overflow: hidden;\n  transition: .3s ease-in-out;\n  border-radius: 8px;\n  background-color: #efefef;\n  padding: 1.4px;\n}\n.ImageInCard img {\n  padding: 0;\n  border-radius: 8px;\n  width:100%;\n  height:100%;\n}\n@media (prefers-color-scheme: dark) {\n  .card {background-color: rgba(180,180,180,0.2)#333;}\n}\n\n</style>\n<div id=\"imageTab\"></div>\n<div class=\"ImageGrid\"></div>\n```\n\n### 2.处理图片信息\n\n1. 创建存放照片原图文件夹images/gallery，子目录为根据主题分类的相册，如“广州”、“上海”...\n\n2. 在gallery文件夹下新建js文件\"create.js\"，用于处理图片信息\n\n   ```js\n   # create.js\n   const fs = require('fs-extra');\n   const path = require('path');\n   const imageSize = require('image-size');  # 这里没有安装 image-size，需要npm安装下:   npm i -S image-size\n   \n   const rootPath=\"gallery/\"   //相册相对路径，也可填绝对路径，指向相册的目录，目的为了生成json\n   \n   class PhotoExtension {\n       constructor() {\n           this.size = 64;\n           this.offset = [0, 0];\n       }\n   }\n   \n   class Photo {\n       constructor() {\n           this.dirName = '';\n           this.fileName = '';\n           this.iconID = '';\n           this.extension = new PhotoExtension();\n       }\n   }\n   \n   class PhotoGroup {\n       constructor() {\n           this.name = '';\n           this.children = [];\n       }\n   }\n   \n   function createPlotIconsData() {\n       let allPlots = [];\n       let allPlotGroups = [];\n   \n       const plotJsonFile = path.join(__dirname, './photosInfo.json');\n       const plotGroupJsonFile = path.join(__dirname, './photos.json');\n   \n       if (fs.existsSync(plotJsonFile)) {\n           allPlots = JSON.parse(fs.readFileSync(plotJsonFile));\n       }\n   \n       if (fs.existsSync(plotGroupJsonFile)) {\n           allPlotGroups = JSON.parse(fs.readFileSync(plotGroupJsonFile));\n       }\n   \n       fs.readdirSync(__dirname).forEach(function(dirName) {\n           const stats = fs.statSync(path.join(__dirname, dirName));\n           const isDir = stats.isDirectory();\n           if (isDir) {\n               const subfiles = fs.readdirSync(path.join(__dirname, dirName));\n               subfiles.forEach(function(subfileName) {\n                   // 如果已经存在 则不再处理\n                   // if (allPlots.find(o => o.fileName === subfileName && o.dirName === dirName)) {\n                   //     return;\n                   // }\n   \n                   // 新增标\n                   const plot = new Photo();\n                   plot.dirName = dirName;\n                   plot.fileName = subfileName;\n                   const imageInfo = imageSize(rootPath+dirName + \"/\" + subfileName);\n                   plot.iconID = imageInfo.width + '.' + imageInfo.height + ' ' + subfileName;\n                   allPlots.push(plot);\n                   console.log(`RD: createPlotIconsData -> new plot`, plot);\n   \n                   // 为新增标添加分组 暂时以它所处的文件夹为分组\n                   let group = allPlotGroups.find(o => o.name === dirName);\n                   if (!group) {\n                       group = new PhotoGroup();\n                       group.name = dirName;\n                       allPlotGroups.push(group);\n                       console.log(`RD: createPlotIconsData -> new group`, group);\n                   }\n                   group.children.push(plot.iconID);\n               });\n           }\n       });\n   \n       fs.writeJSONSync(plotJsonFile, allPlots);\n       fs.writeJSONSync(plotGroupJsonFile, allPlotGroups);\n   }\n   \n   createPlotIconsData();\n   ```\n\n3. **执行create.js文件**，在gallery文件夹下生成包含图片信息的JSON文件（photosInfo.json和photos.json`）\n\n   ```cmd\n   # 相册的生成需要先用create.js脚本对images\\gallery\\下的相册文件进行预处理\n   # 示例 F:myblog\\source\\images>node gallery/create.js\n   node gallery/create.js\n   ```\n\n4. 将photos.json**拷贝**到source目录下的photos页面文件夹中\n\n### 3.加载js和css文件\n\n1. 在 /source/js/ 目录下创建 photoWall.js，用于在网页上动态创建和管理图片相册的界面\n\n   ```js\n   var imgDataPath = \"/photos/photos.json\"; //图片名称高宽信息json文件路径\n   var imgPath = \"/sources/images/gallery/\"; //图片访问路径, 这里示例是本地路径，后续会提供网页端图片加载加速方案\n   var imgMaxNum = 50; //图片显示数量\n   \n   var windowWidth =\n     window.innerWidth ||\n     document.documentElement.clientWidth ||\n     document.body.clientWidth;\n   if (windowWidth < 768) {\n     var imageWidth = 145; //图片显示宽度(手机端)\n   } else {\n     var imageWidth = 250; //图片显示宽度\n   }\n   \n   const photo = {\n     page: 1,\n     offset: imgMaxNum,\n     init: function () {\n       var that = this;\n       $.getJSON(imgDataPath, function (data) {\n         that.render(that.page, data);\n         //that.scroll(data);\n         that.eventListen(data);\n       });\n     },\n     constructHtml(options) {\n       const {\n         imageWidth,\n         imageX,\n         imageY,\n         name,\n         imgPath,\n         imgName,\n         imgNameWithPattern,\n       } = options;\n       const htmlEle = `<div class=\"card lozad\" style=\"width:${imageWidth}px\">\n                     <div class=\"ImageInCard\" style=\"height:${\n                       (imageWidth * imageY) / imageX\n                     }px\">\n                       <a data-fancybox=\"gallery\" href=\"${imgPath}${name}/${imgNameWithPattern}\"\n                             data-caption=\"${imgName}\" title=\"${imgName}\">\n                               <img  class=\"lazyload\" data-src=\"${imgPath}${name}/${imgNameWithPattern}\"\n                               src=\"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\"\n                               onload=\"lzld(this)\"\n                               lazyload=\"auto\">\n                           </a>\n                     </div>\n                   </div>`;\n       return htmlEle;\n     },\n     render: function (page, data = []) {\n       this.data = data;\n       if (!data.length) return;\n       var html,\n         imgNameWithPattern,\n         imgName,\n         imageSize,\n         imageX,\n         imageY,\n         li = \"\";\n   \n       let liHtml = \"\";\n       let contentHtml = \"\";\n   \n       data.forEach((item, index) => {\n         const activeClass = index === 0 ? \"active\" : \"\";\n         liHtml += `<li class=\"nav-item\" role=\"presentation\">\n             <a class=\"nav-link ${activeClass} photo-tab\" id=\"home-tab\" photo-uuid=\"${item.name}\" data-toggle=\"tab\" href=\"#${item.name}\"  role=\"tab\" aria-controls=\"${item.name}\" aria-selected=\"true\">${item.name}</a>\n           </li>`;\n       });\n       const [initData = {}] = data;\n       const { children = [],name } = initData;\n       children.forEach((item, index) => {\n         imgNameWithPattern = item.split(\" \")[1];\n         imgName = imgNameWithPattern.split(\".\")[0];\n         imageSize = item.split(\" \")[0];\n         imageX = imageSize.split(\".\")[0];\n         imageY = imageSize.split(\".\")[1];\n         let imgOptions = {\n           imageWidth,\n           imageX,\n           imageY,\n           name,\n           imgName,\n           imgPath,\n           imgNameWithPattern,\n         };\n         li += this.constructHtml(imgOptions);\n       });\n       contentHtml += ` <div class=\"tab-pane fade show active\"  role=\"tabpanel\" aria-labelledby=\"home-tab\">${li}</div>`;\n   \n       const ulHtml = `<ul class=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\">${liHtml}</ul>`;\n       const tabContent = `<div class=\"tab-content\" id=\"myTabContent\">${contentHtml}</div>`;\n   \n       $(\"#imageTab\").append(ulHtml);\n       $(\".ImageGrid\").append(tabContent);\n       this.minigrid();\n     },\n     eventListen: function (data) {\n       let self = this;\n       var html,\n         imgNameWithPattern,\n         imgName,\n         imageSize,\n         imageX,\n         imageY,\n         li = \"\";\n       $('a[data-toggle=\"tab\"]').on(\"shown.bs.tab\", function (e) {\n         $(\".ImageGrid\").empty();\n         const selectId = $(e.target).attr(\"photo-uuid\");\n         const selectedData = data.find((data) => data.name === selectId) || {};\n         const { children,name } = selectedData;\n         let li = \"\";\n         children.forEach((item, index) => {\n           imgNameWithPattern = item.split(\" \")[1];\n           imgName = imgNameWithPattern.split(\".\")[0];\n           imageSize = item.split(\" \")[0];\n           imageX = imageSize.split(\".\")[0];\n           imageY = imageSize.split(\".\")[1];\n           let imgOptions = {\n             imageWidth,\n             imageX,\n             imageY,\n             name,\n             imgName,\n             imgPath,\n             imgNameWithPattern,\n           };\n           li += self.constructHtml(imgOptions);\n         });\n         $(\".ImageGrid\").append(li);\n         self.minigrid();\n       });\n     },\n     minigrid: function () {\n       var grid = new Minigrid({\n         container: \".ImageGrid\",\n         item: \".card\",\n         gutter: 12,\n       });\n       grid.mount();\n       $(window).resize(function () {\n         grid.mount();\n       });\n     },\n   };\n   photo.init();\n   ```\n\n2. 使用注册器将需要的js,css注入,在/scripts/injector.js(如没有,则创建)中输入以下内容:\n\n   ```js\n   const { root: siteRoot = \"/\" } = hexo.config;\n   // layout为photo的时候导入这些js与css\n   hexo.extend.injector.register(\n     \"body_end\",\n     `\n     <link rel=\"stylesheet\" href=\"https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css\">\n     <script src=\"//cdn.jsdelivr.net/npm/minigrid@3.1.1/dist/minigrid.min.js\"></script>\n     <script src=\"https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js\"></script>\n    <script src=\"https://cdn.bootcdn.net/ajax/libs/lazyloadjs/3.2.2/lazyload.js\"></script>\n       <script defer src=\"${siteRoot}js/photoWall.js\"></script>`,\n     \"photo\"\n   );\n   ```\n\n### 4.网页端图片加速\n\n​\t因为我是基于githubpage部署的博客，国内访问的时候，图片文件加载起来巨慢从而导致导致网页基本打不开，刚开始我参考[如何使用jsDelivr+Github 实现免费CDN加速?](https://zhuanlan.zhihu.com/p/346643522)搭建了一个github仓库用于存放相册并用于cdn加速，但实际效果还是不行，因此，我想到了用阿里云oss图床，提高网页中图片加载速度，从而提高网页加载速度。\n\n1. 文章中图片：采用typora+picgo+阿里云oss方案，参考链接：[【Typora】typora+picgo+阿里云oss搭建图床](https://www.cnblogs.com/myworld7/p/13132549.html)。\n\n2. 相册图片：阿里云ossutil工具，具体方法参考官方说明：[ossutil概述](https://help.aliyun.com/zh/oss/developer-reference/overview-59?spm=5176.8465980.help.dexternal.9c691450trHl8S)。\n\n   - 如果使用该方案photowall.js中的图片访问路径（imgPath）需更改为阿里云文件夹中的前缀。如“<https://picoflynx.oss-cn-XXX.aliyuncs.com/source/images/gallery/”>\n   - 为了实现相对于photowall.js图片访问路径与本地相册路径的一致性，我把整个source文件都上传至oss了\n\n   至此，一个基于hexo的fluid主题的相册就搭建完成啦~，效果如图：\n\n   ![相册效果图](https://picoflynx.oss-cn-guangzhou.aliyuncs.com/source/images/gallery/%E6%96%87%E7%AB%A0%E5%9B%BE/202403302209080.png)\n\n## 优化\n\n### 简化create流程\n\n​\t每次上传图片的时候，都需要删除photos.json，再重新执行create.js生成新的photos.json，然后再复制到photos页面文件夹...太麻烦了\n\n**解决方案**：写bat脚本执行这个过程（本人技术有限，只想到了这个...）\n\n- 先写一个批处理文件（run-node-app.bat)置于image文件夹，用于删除旧photos.json,并执行create.js\n\n  ```bat\n  @echo off\n  cd /d \"F:myblog\\source\\images\"\n  \n  :: 定义要删除的子文件夹中的文件路径\n  SET \"FILE_PATH_1=gallery\\photos.json\"\n  SET \"FILE_PATH_2=gallery\\photosInfo.json\"\n  \n  :: 删除第一个文件\n  del \"%FILE_PATH_1%\" 2>nul\n  if not exist \"%FILE_PATH_1%\" (\n      echo The file %FILE_PATH_1% has been deleted successfully.\n  ) else (\n      echo The file %FILE_PATH_1% was not found or could not be deleted.\n  )\n  \n  :: 删除第二个文件\n  del \"%FILE_PATH_2%\" 2>nul\n  if not exist \"%FILE_PATH_2%\" (\n      echo The file %FILE_PATH_2% has been deleted successfully.\n  ) else (\n      echo The file %FILE_PATH_2% was not found or could not be deleted.\n  )\n  \n  :: 执行create.js\n  node \"gallery\\create.js\"\n  \n  pause\n  ```\n\n- 在source文件夹下写一个批处理文件（img-refresh.bat)，用于调用run-node-app.bat,并覆盖photos/photos.js\n\n  ```bat\n  @echo off\n  :: 处理相册gallery\n  cd /d \"F:myblog\\source\\images\"\n  call \"run-node-app.bat\"\n  echo \"run-node-app.bat has been executed.\"\n  \n  pause\n  \n  ::复制粘贴至photos\n  \n  cd /d \"F:myblog\\source\"\n  \n  :: 定义要删除的photos中的文件路径\n  SET \"FILE_PATH_1=photos\\photos.json\"\n  \n  :: 定义要复制的文件路径和目标路径\n  SET \"SOURCE_FILE_PATH=images\\gallery\\photos.json\"\n  SET \"TARGET_FILE_PATH=photos\\photos.json\"\n  \n  :: 删除子文件夹photos中的一个文件\n  del \"%FILE_PATH_1%\" 2>nul\n  if not exist \"%FILE_PATH_1%\" (\n      echo The file %FILE_PATH_1% has been deleted successfully.\n  ) else (\n      echo The file %FILE_PATH_1% was not found or could not be deleted.\n  )\n  \n  :: 将images/gallery/中的文件复制到photos中\n  copy \"%SOURCE_FILE_PATH%\" \"%TARGET_FILE_PATH%\" /y\n  if not exist \"%TARGET_FILE_PATH%\" (\n      echo Failed to copy the file from subfolder1 to subfolder2.\n      goto End\n  ) else (\n      echo The file has been copied successfully from subfolder1 to subfolder2.\n  )\n  \n  pause\n  ```\n\n- 该法方法脚本编写过程可能有点低级，但最终实现的效果是，只需要在相册更新之后，双击一下img-refresh.bat就能实现相册更新了\n\n### 简化ossutil流程\n\n**痛点**：ossutil命令太难用了，搞了好久都没明白怎么实现命令简化\n\n**解决方案**：那就又bat吧。编写一个bat(osssync.bat)置于image文件夹下，用于一键同步本地相册于oss\n\n```bat\n@echo off\n\nossutil64 sync F:myblog\\source\\images oss://bucket名/source/images/ --force\n:: --force为可选项，当使用ossutil64 sync命令同步文件夹到阿里云OSS时，确实会提示你确认每个文件的上传操作。为了简化这个过程，避免每次上传时都需要手动输入确认（y/n），在命令行中添加--force选项。让ossutil在同步时自动覆盖目标OSS上的文件，而不需要进一步的确认。\n\npause\n```\n\n## 参考\n\n1. [【Hexo】基于Fluid主题的Hexo增加相册功能实践 | Kezade](https://zyxelva.github.io/posts/45280.html#3-加载-js和css文件)\n\n2. [如何使用jsDelivr+Github 实现免费CDN加速? - 知乎](https://zhuanlan.zhihu.com/p/346643522)\n\n3. [【Hexo】基于Fluid主题的Hexo增加相册功能实践](https://zyxelva.github.io/posts/45280.html#3-%E5%8A%A0%E8%BD%BD-js%E5%92%8Ccss%E6%96%87%E4%BB%B6)\n","tags":["网页搭建"],"categories":["生产指南"]},{"title":"欢迎来到晓老板之家","url":"/2024/03/25/First post/","content":" Welcome! This is my first blog, going forward I'll be documenting my studies and life here, thanks for following ~\n"}]